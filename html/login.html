<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Đăng nhập - Sweet shop</title>
        <link rel="stylesheet" href="../css/bootstrap.min.css" />
        <link rel="stylesheet" href="../css/style.css" />
        <link rel="stylesheet" href="../css/all.min.css" />
        <link rel="stylesheet" href="../css/bootstrap-icons.css" />
    </head>
    <body>
        <div class="main-body">
            <div class="header">
                <header class="main-header p-3">
                    <div class="logo d-flex justify-content-center align-items-center">
                        <img src="../images/logo.jpg" alt="Bán hàng Online K-Sweet" class="rounded-circle width-110px" />
                    </div>
                    <div class="mid-action d-flex flex-column justify-content-center align-items-center">
                        <div class="search-bar input-group w-75 mb-2 position-relative">
                            <input type="text" id="searchInput" class="form-control" placeholder="Tìm kiếm sản phẩm..." autocomplete="off" />
                            <button class="btn search-btn" type="button">
                                <i class="fa fa-search"></i>
                            </button>

                            <!-- Dropdown kết quả tìm kiếm -->
                            <div id="searchResults" class="list-group position-absolute w-100" style="top: 100%; margin-top: 2px; z-index: 1000; display: none"></div>
                        </div>
                        <div class="policy-search">
                            <ul>
                                <li>
                                    <img src="../images/header_03_policy_1_ico.webp" />
                                    <span>Đảm bảo chất lượng</span>
                                </li>
                                <li>
                                    <img src="../images/header_03_policy_2_ico.webp" />
                                    <span>Hotline 0912345678</span>
                                </li>
                                <li>
                                    <img src="../images/header_03_policy_3_ico.webp" />
                                    <span>Mở hộp kiểm tra nhận hàng</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="right-action d-flex align-items-center gap-3">
                        <a href="../html/cart.html" id="cart" class="icon" data-require-login="true">
                            <i class="bi bi-cart3"></i>
                            <span class="p-2">Giỏ hàng</span>
                        </a>
                        <a href="../html/login.html" id="user" class="icon" data-require-login="true">
                            <i class="bi bi-person-circle"></i>
                            <span class="p-2">Đăng nhập / Đăng ký</span>
                        </a>
                        <a href="#" id="notify" class="icon" data-require-login="true">
                            <i class="bi bi-bell"></i>
                            <span class="p-2">Thông báo</span>
                        </a>
                    </div>
                </header>
                <div class="nav d-flex justify-content-center align-items-center">
                    <nav class="menu">
                        <ul class="d-flex justify-content-center align-items-center">
                            <li><a href="../html/index.html">TRANG CHỦ</a></li>
                            <li><a href="../html/about.html">VỀ K-SWEET</a></li>
                            <li><a href="../html/products.html">SẢN PHẨM</a></li>
                            <li><a href="../html/news.html">TIN TỨC</a></li>
                            <li><a href="../html/contact.html">LIÊN HỆ</a></li>
                            <li><a href="../html/sitemap.html">SITEMAP</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="layout-account d-flex justify-content-center align-items-center flex-column">
                <div class="form mt-5">
                    <div class="sel d-flex justify-content-center align-items-center mt-5">
                        <a href="../html/login.html" class="sel-item active">Đăng nhập</a>
                        <a href="../html/register.html" class="sel-item">Đăng ký</a>
                    </div>
                    <div class="form-item d-flex flex-column justify-content-center align-items-center">
                        <input id="loginEmail" type="text" placeholder="Vui lòng nhập email của bạn" />
                        <input id="loginPassword" type="password" placeholder="Vui lòng nhập mật khẩu" />
                    </div>
                    <div class="d-flex justify-content-center align-items-center flex-column">
                        <p>
                            This site protected by reCAPCHA and the Google <a href="https://policies.google.com/privacy">Privacy</a> and
                            <a href="https://policies.google.com/terms">Terms of Service</a> apply.
                        </p>
                    </div>
                    <div class="form-action d-flex justify-content-center align-items-center flex-column">
                        <button id="loginBtn" type="button">ĐĂNG NHẬP</button>
                        <p class="m-3">Bạn chưa có tài khoản? <a href="../html/register.html">Đăng ký</a></p>
                        <p class="m-0">Bạn quên mật khẩu? <a href="#" id="forgotPasswordLink">Quên mật khẩu</a></p>
                    </div>
                </div>
            </div>
            <div class="footer">
                <div class="footer-newsletter d-flex">
                    <div class="footer-newsletter-left d-flex align-items-center">
                        <h3>Đăng ký nhận tin</h3>
                        <input type="text" placeholder="Nhập email của bạn" />
                        <button type="button">Đăng ký</button>
                    </div>
                    <div class="footer-newsletter-right d-flex align-items-center">
                        <h3>Kết nối với chúng tôi</h3>
                        <a href="#"><i class="bi bi-facebook text-dark"></i></a>
                        <a href="#"><i class="bi bi-instagram text-dark"></i></a>
                        <a href="#"><i class="bi bi-youtube text-dark"></i></a>
                    </div>
                </div>
                <div class="footer-expand-collapsed">
                    <div class="item-1 p-4">
                        <h4 style="font-weight: bold">CÔNG TY CỔ PHẦN K-SWEET</h4>
                        <p class="m-0">
                            Công ty cổ phần Bibica là một trong những công ty sản xuất và kinh doanh bánh kẹo hàng đầu tại Việt Nam, sở hữu nhiều thương hiệu sản phẩm chất lượng như: Hura, Goody,
                            Quasure, Zoo, aHHa, Migita,...
                        </p>
                        <i class="fa fa-phone"></i> 0912345678 <br />
                        <i class="fa fa-envelope"></i> banhang.online@ksweet.com.vn <br />
                        <img src="../images/img-bct-dathongbao.png" alt="" width="150" height="50" />
                    </div>
                    <div class="item-2 p-4">
                        <h4 style="font-weight: bold">PHƯƠNG THỨC THANH TOÁN</h4>
                        <div class="list-pay">
                            <img src="../images/icon-atm.svg" alt="" width="55" height="55" />
                            <img src="../images/icon-cash-f.svg" alt="" width="55" height="55" />
                            <img src="../images/icon-jcb-3.svg" alt="" width="55" height="55" />
                            <img src="../images/icon-mastercard-3.svg" alt="" width="55" height="55" /> <br />
                            <img src="../images/icon-momo-f.svg" alt="" width="55" height="55" />
                            <img src="../images/icon-visa-3.svg" alt="" width="55" height="55" />
                            <img src="../images/vnpay-f.svg" alt="" width="55" height="55" />
                            <img src="../images/zalopay-f.svg" alt="" width="55" height="55" />
                        </div>
                    </div>
                    <div class="item-3 p-4">
                        <h4 style="font-weight: bold">ĐƠN VỊ VẬN CHUYỂN</h4>
                        <div class="list-transport">
                            <img src="../images/be.png" alt="" width="80" height="55" />
                            <img src="../images/express.png" alt="" width="80" height="55" />
                            <img src="../images/ahamove.png" alt="" width="80" height="55" /> <br />
                            <img src="../images/viettel.png" alt="" width="80" height="55" />
                            <img src="../images/spx.png" alt="" width="80" height="55" />
                            <img src="../images/ninja.png" alt="" width="80" height="55" /> <br />
                            <img src="../images/j&t.png" alt="" width="80" height="55" />
                        </div>
                    </div>
                    <div class="item-4 p-4">
                        <h4 style="font-weight: bold">LIÊN KẾT</h4>
                        <ul>
                            <li><a href="../html/index.html">Trang Chủ</a></li>
                            <li><a href="../html/about.html">Về K-Sweet</a></li>
                            <li><a href="../html/products.html">Sản Phẩm</a></li>
                            <li><a href="../html/news.html">Tin tức</a></li>
                            <li><a href="../html/contact.html">Liên Hệ</a></li>
                            <li><a href="../html/sitemap.html">Sitemap</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-copyright d-flex justify-content-center align-items-center">
                    <p>Copyright &copy; 2023 - Bản quyền của Bán hàng Online K-Sweet</p>
                </div>
            </div>
        </div>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script src="../js/script.js"></script>
        <script>
            document.getElementById("loginBtn").addEventListener("click", handleLogin);
            function handleLogin() {
                const email = document.getElementById("loginEmail").value.trim().toLowerCase();
                const password = document.getElementById("loginPassword").value;
                if (!email || !password) {
                    alert("Vui lòng nhập email và mật khẩu!");
                    return;
                }
                const users = JSON.parse(localStorage.getItem("users")) || {};
                if (!users[email]) {
                    alert("Tài khoản không tồn tại!");
                    return;
                }

                if (users[email].password !== password) {
                    alert("Mật khẩu không đúng!");
                    return;
                }
                localStorage.setItem("loggedInUser", email);

                window.location.href = "../html/index.html";
            }
        </script>
        <script>
            document.addEventListener("keydown", function (event) {
                const emailInput = document.getElementById("loginEmail");
                const passwordInput = document.getElementById("loginPassword");
                const isEmailFocused = document.activeElement === emailInput;
                const isPasswordFocused = document.activeElement === passwordInput;
                if ((isEmailFocused || isPasswordFocused) && event.key === "Enter") {
                    handleLogin();
                }
            });
        </script>
        <script>
            document.getElementById("forgotPasswordLink").addEventListener("click", function (event) {
                event.preventDefault();
                const email = prompt("Vui lòng nhập email để khôi phục mật khẩu:");
                if (!email) {
                    alert("Bạn chưa nhập email.");
                    return;
                }
                const users = JSON.parse(localStorage.getItem("users") || "{}");
                const user = users[email];
                if (user) {
                    alert(`Mật khẩu của bạn là: ${getPasswordHint(user.password)}`);
                } else {
                    alert("Không tìm thấy email này trong hệ thống.");
                }
            });

            function getPasswordHint(password) {
                if (password.length <= 4) {
                    return "*".repeat(password.length);
                }
                const first = password.slice(0, 2);
                const last = password.slice(-2);
                const masked = "*".repeat(password.length - 4);
                return `${first}${masked}${last}`;
            }
        </script>
    </body>
</html>
